# Альтернатива рекомендационной системе YouTube

<p align="center"><img src="https://i.ibb.co/mTL0svz/You-Tube-logo.jpg" width="357" height="291"></p>

English version: [README_eng.md](https://github.com/boa00/youtube-recommendations/blob/main/README_eng.md)

Мне не нравится система рекомендации YouTube. Дело в том, что у тебя никакого контроля над этим процессом: если случайно посмотреть буквально один ролик про политику, то потом весь твой фид забит подобными бесполезными видео. Моя программа позволяет выбрать плейлист с роликами, которые тебе действительно нравится, после чего рекомендации строятся ТОЛЬКО на этом плейлисте. Таким образом, у меня есть полный контроль над типом видео, которые попадают в рекомендации

С этой целью, я скачал мой собственный плейлист понравившихся видео с YouTube и использовал официальный API YouTube чтобы получить данные о роликах (описание, теги, и т.д.). Затем, я использовал TF-IDF алгоритм для создания рекомендаций

# Алгоритм

Рекомендации создаются при помощи метода relatedToVideoId от YouTube API: он возвращает до 25 наиболее похожих видео на любой заданный ролик. Моя программа улучшает эти рекомендации, отбирая среди результатов поиска relatedToVideoId наиболее релевантные видео (с учетом выбранного плейлиста) с помощью TF-IDF

Мой простой алгоритм:

1. Случайным образом выбрать 1 ролик из плейлиста
2. С помощью TF-IDF алгоритма найти 3 видео из плейлиста который наиболее похожи на ролик из первого пункта
3. Для каждого из 3 роликов из прошлого пункта найти 25 наиболее похожих видео, используя метод relatedToVideoId. 
4. Для каждого из 3 роликов выбрать из 25 видео одно наиболее похожее, используя TF-IDF алгоритм
5. Убрать повторяющиеся видео. В результате выходит 1-3 (в среднем 2.5 где-то) рекомендации на каждое случайно выбранное видео 

Повторить этот процесс n раз, в зависимости от желаемого количества рекомендаций (я выбрал n = 3, т.е. в среднем 7-10 рекомендаций за раз). В целом, указанные в алгоритме цифры были выбраны достаточно произвольно, но для меня такая комбинация оказалась наиболее удобна. После всего этого процесса, рекомендации отправляются по почте вот в таком виде:

<p align="center"><img src=https://i.ibb.co/4FkZRcw/Untitled.png"></p>

# Сбор и Обработка Данных 
Суть TF-IDF алгоритма в том, что он находит наиболее похожие текстовые документы между собой. Поэтому, мне надо было конвертировать видео в текст. Для этого, я использовал 5 features: название видео, название канала, описание ролика, теги и субтитры.

Чтобы получить субтитры, я использовал YouTubeTranscriptApi, в то время какие остальные параметры я нашел через официальный API от YouTube 
Затем, для каждого ролика я объединил все эти строки в один большой текстовый документ и уже на нем использовал TF-IDF алгоритм. Мне приходилось трансформировать результаты API запроса в удобный DataFrame дважды: когда обрабатывал видео из плейлиста, а также когда обрабатывал ролики от relatedToVideoId. Формат обоих запросов одинаковый, поэтому я создал отдельный класс RequestTransformation для их обработки

# References
- Официальный YouTube API: https://developers.google.com/youtube/v3
- YouTubeTranscriptApi для парсинга субтитров из видео: https://github.com/jdepoix/youtube-transcript-api

